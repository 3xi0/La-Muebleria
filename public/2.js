(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{13:function(t,e,r){var s=r(34);"string"==typeof s&&(s=[[t.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(10)(s,a);s.locals&&(t.exports=s.locals)},3:function(t,e,r){"use strict";var s=r(1),a=Object(s.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex justify-center items-center w-full py-3 lg:py-5 bg-orange-400 shadow-md"},[e("h1",{staticClass:"font-semibold text-2xl lg:text-4xl text-white"},[this._t("default")],2)])}),[],!1,null,null,null);e.a=a.exports},33:function(t,e,r){"use strict";var s=r(13);r.n(s).a},34:function(t,e,r){(t.exports=r(9)(!1)).push([t.i,".handler[data-v-fea2e808]{--text-opacity:1;color:#ed8936;color:rgba(237,137,54,var(--text-opacity));--border-opacity:1;border-color:#ed8936;border-color:rgba(237,137,54,var(--border-opacity))}.handler[data-v-fea2e808]:not(:disabled){transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.handler[data-v-fea2e808]:disabled{--text-opacity:1;color:#a0aec0;color:rgba(160,174,192,var(--text-opacity));--border-opacity:1;border-color:#a0aec0;border-color:rgba(160,174,192,var(--border-opacity));cursor:not-allowed}.handler[data-v-fea2e808]:not(:disabled):focus,.handler[data-v-fea2e808]:not(:disabled):hover{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity));--bg-opacity:1;background-color:#ed8936;background-color:rgba(237,137,54,var(--bg-opacity))}",""])},68:function(t,e,r){"use strict";r.r(e);var s=r(0),a=r.n(s),n=r(2),o=r(3),i={props:{min:{type:Number,default:0},max:{type:Number,default:null},value:Number},methods:{decrement:function(){this.value>this.min&&this.$emit("input",this.value-1)},increment:function(){(!this.max||this.value<this.max)&&this.$emit("input",this.value+1)}}},c=(r(33),r(1)),u=Object(c.a)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex flex-row"},[r("span",{staticClass:"text-center align-middle px-2 py-1 text-orange-500 border-orange-500 border rounded-l-md"},[t._v("\n        Añadir al carrito\n    ")]),t._v(" "),r("button",{staticClass:"text-center align-middle border-r border-t border-b handler px-2 py-1",attrs:{disabled:t.value<=t.min},on:{click:t.decrement}},[r("font-awesome-icon",{attrs:{icon:"chevron-down"}})],1),t._v(" "),r("input",{staticClass:"text-gray-700 bg-white border-b border-t border-gray-500 px-2 py-1 text-center",attrs:{type:"text",size:"3",readonly:""},domProps:{value:t.value}}),t._v(" "),r("button",{staticClass:"text-center align-middle border-l border-t border-b handler px-2 py-1",attrs:{disabled:!!t.max&&t.value>=t.max},on:{click:t.increment}},[r("font-awesome-icon",{attrs:{icon:"chevron-up"}})],1),t._v(" "),r("button",{staticClass:"text-center align-middle handler px-2 py-1 border rounded-r-md",on:{click:function(e){return t.$emit("add")}}},[r("font-awesome-icon",{attrs:{icon:"arrow-right"}})],1)])}),[],!1,null,"fea2e808",null).exports;function l(t,e,r,s,a,n,o){try{var i=t[n](o),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(s,a)}function d(t){return function(){var e=this,r=arguments;return new Promise((function(s,a){var n=t.apply(e,r);function o(t){l(n,s,a,o,i,"next",t)}function i(t){l(n,s,a,o,i,"throw",t)}o(void 0)}))}}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f,x,v,h,b,y={props:{productId:{type:String|Number,validator:function(t){return!isNaN(t)&&!isNaN(parseInt(t))}}},data:function(){return{loading:!1,product:null,error:null,quantity:1,currentImg:null}},computed:g(g({},Object(n.c)("auth",["authenticated","administrator"])),{},{rating:function(){return this.product.rating?_.round(parseFloat(this.product.rating)):0},userRating:function(){return this.product.user_rating?_.round(parseFloat(this.product.user_rating)):0}}),created:function(){var t=this;this.fetchData().then((function(){t.product.name&&(document.title=t.product.name+" | La mueblería")}))},watch:{$route:function(){this.product=null,this.error=null,this.quantity=1,this.currentImg=null;var t=this;this.fetchData().then((function(){t.product.name&&(document.title=t.product.name+" | La mueblería")}))}},methods:g(g({},Object(n.b)("cart",{addToCartAction:"addToCart"})),{},{fetchData:(b=d(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,axios.get("/api/products/"+this.productId);case 4:e=t.sent.data.data,this.product=e,this.currentImg=this.product.thumbnail,t.next=15;break;case 9:t.prev=9,t.t0=t.catch(1),r="",t.t0.response?404==t.t0.response.status?r+="El recurso solicitado no existe":401!=t.t0.response.status&&403!=t.t0.response.status||(r+="No posee acceso al recurso solicitado"):r=t.t0.request?"El servidor tardó en responder":"No se pudo comunicar con el servidor",this.error=r+" ("+t.t0.message+")",document.title="Error al cargar producto | La mueblería";case 15:return t.prev=15,this.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[1,9,15,18]])}))),function(){return b.apply(this,arguments)}),addRating:(h=d(a.a.mark((function t(e){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios.post("/api/user/ratings/"+this.productId,{rating:e});case 3:this.product.user_rating=e.toString(),this.$notify({group:"messages",type:"success",title:"Reseña agregada correctamente"}),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),r="",t.t0.response?404==t.t0.response.status?r+="El recurso solicitado no existe":401!=t.t0.response.status&&403!=t.t0.response.status||(r+="No posee acceso al recurso solicitado"):r=t.t0.request?"El servidor tardó en responder":"No se pudo comunicar con el servidor",this.$notify({group:"messages",type:"error",title:"Error",text:r+" ("+t.t0.message+")"});case 12:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(t){return h.apply(this,arguments)}),deleteRating:(v=d(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios.delete("/api/user/ratings/"+this.productId);case 3:return this.product.user_rating=null,t.next=6,axios.get("/api/ratings/"+this.productId);case 6:e=t.sent.data,this.product.rating=e.rating,this.product.n_users_rating=e.n_users_rating,this.$notify({group:"messages",type:"success",title:"Reseña eliminada correctamente"}),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),r="",t.t0.response?404==t.t0.response.status?r+="El recurso solicitado no existe":401!=t.t0.response.status&&403!=t.t0.response.status||(r+="No posee acceso al recurso solicitado"):r=t.t0.request?"El servidor tardó en responder":"No se pudo comunicar con el servidor",this.$notify({group:"messages",type:"error",title:"Error",text:r+" ("+t.t0.message+")"});case 17:case"end":return t.stop()}}),t,this,[[0,12]])}))),function(){return v.apply(this,arguments)}),addToCart:(x=d(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.addToCartAction({id:this.productId,quantity:this.quantity});case 3:console.log("Producto añadido"),this.$notify({group:"messages",type:"success",title:"Producto añadido exitosamente"}),t.next=13;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),e="",t.t0.response?404==t.t0.response.status?e+="El recurso solicitado no existe":401!=t.t0.response.status&&403!=t.t0.response.status||(e+="No posee acceso al recurso solicitado"):e=t.t0.request?"El servidor tardó en responder":"No se pudo comunicar con el servidor",this.$notify({group:"messages",type:"error",title:"Error",text:e+" ("+t.t0.message+")"});case 13:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return x.apply(this,arguments)}),remove:(f=d(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,axios.delete("/api/products/"+this.product.id);case 4:console.log("Producto eliminado"),this.$notify({group:"messages",type:"success",title:"Producto eliminado exitosamente"}),this.$router.push({name:"list",params:{category:this.product.category}}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),e="",t.t0.response?404==t.t0.response.status?e+="El recurso solicitado no existe":401!=t.t0.response.status&&403!=t.t0.response.status||(e+="No posee acceso al recurso solicitado"):e=t.t0.request?"El servidor tardó en responder":"No se pudo comunicar con el servidor",this.error=e+" ("+t.t0.message+")";case 14:return t.prev=14,this.loading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,9,14,17]])}))),function(){return f.apply(this,arguments)})}),components:{TitleBanner:o.a,NumberSpinnerItem:u}},C=Object(c.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex flex-1 flex-col"},[r("TitleBanner",[t._v("Ver producto")]),t._v(" "),t.error?[r("div",{staticClass:"flex flex-1 flex-col justify-center items-center"},[r("h1",{staticClass:"text-orange-500 text-xl sm:text-2xl lg:text-3xl font-semibold text-center"},[t._v(t._s(t.error))])])]:t.loading?[t._m(0)]:[r("div",{staticClass:"container flex-1 mx-auto p-5 my-2 lg:my-5 grid lg:grid-cols-2 lg:gap-x-12 gap-y-3 lg:gap-y-0"},[r("div",{staticClass:"grid grid-cols-12 gap-x-2"},[r("div",{staticClass:"col-span-3 lg:col-span-2 flex flex-col gap-y-2 justify-start items-center"},t._l([t.product.thumbnail].concat(t.product.images),(function(e,s){return r("div",{key:s,staticClass:"rounded-md p-1 border bg-gray-200 border-gray-300 hover:cursor-pointer flex justify-center items-center w-full h-auto",on:{mouseenter:function(r){t.currentImg=e}}},[r("img",{attrs:{src:e,alt:"Imágen del producto"}})])})),0),t._v(" "),r("div",{staticClass:"col-span-9 lg:col-span-10"},[t.currentImg?r("img",{staticClass:"object-contain object-center w-full",attrs:{src:t.currentImg,alt:"Imágen del producto"}}):t._e()])]),t._v(" "),r("div",{staticClass:"space-y-2"},[r("div",{staticClass:"space-y-1"},[r("h1",{staticClass:"text-orange-500 text-center lg:text-left text-3xl lg:text-4xl font-semibold"},[t._v(t._s(t.product.name))]),t._v(" "),r("p",{staticClass:"text-orange-500 lg:text-lg font-medium"},[t._v("$"+t._s(t.product.price))])]),t._v(" "),r("div",{staticClass:"flex flex-wrap items-center text-lg"},[t.product.user_rating?r("span",{staticClass:"text-orange-400 lg:mr-1"},[t._v("Valoración de su usuario:")]):r("span",{staticClass:"text-orange-400 lg:mr-1"},[t._v("Valoración de los usuarios:")]),t._v(" "),r("span",[t.userRating?[t._l(t.userRating,(function(e){return r("span",{key:e,staticClass:"select-none text-xl text-orange-500"},[t._v("★")])})),t._l(5-t.userRating,(function(e){return r("span",{key:e+t.userRating,staticClass:"select-none text-xl text-orange-500"},[t._v("☆")])})),r("span",{staticClass:"ml-1 text-sm text-orange-400"},[t._v("("+t._s(t.product.user_rating?t.product.user_rating:"0")+" "),r("span",{staticClass:"text-orange-500"},[t._v("★")]),t._v(")")]),r("button",{staticClass:"ml-1 text-blue-500 hover:text-blue-600 focus:text-blue-600 text-sm",on:{click:t.deleteRating}},[t._v("Borrar reseña")])]:t.authenticated?[t._l(t.rating,(function(e){return r("button",{key:e,staticClass:"text-xl text-orange-500 transform origin-bottom transition duration-200 ease-in-out hover:scale-125 focus:scale-125",on:{click:function(r){return t.addRating(e)}}},[t._v("★")])})),t._l(5-t.rating,(function(e){return r("button",{key:e+t.rating,staticClass:"text-xl text-orange-500 transform origin-bottom transition duration-200 ease-in-out hover:scale-125 focus:scale-125",on:{click:function(r){return t.addRating(e+t.rating)}}},[t._v("☆")])})),r("span",{staticClass:"ml-1 text-sm text-orange-400"},[t._v("("+t._s(t.product.rating?t.product.rating:"0")),r("span",{staticClass:"text-orange-500"},[t._v("★")]),t._v(" x "+t._s(t.product.n_users_rating)+" usuarios)")])]:[t._l(t.rating,(function(e){return r("span",{key:e,staticClass:"select-none text-xl text-orange-500"},[t._v("★")])})),t._l(5-t.rating,(function(e){return r("span",{key:e+t.rating,staticClass:"select-none text-xl text-orange-500"},[t._v("☆")])})),r("span",{staticClass:"ml-1 text-sm text-orange-400"},[t._v("("+t._s(t.product.rating?t.product.rating:"0")+" "),r("span",{staticClass:"text-orange-500"},[t._v("★")]),t._v(" x "+t._s(t.product.n_users_rating)+" usuarios)")])]],2)]),t._v(" "),t.product.model?r("p",{staticClass:"text-orange-400"},[t._v("Modelo: "+t._s(t.product.model))]):t._e(),t._v(" "),r("p",{staticClass:"text-orange-400"},[t._v("Categoría: "+t._s(t.product.category.name))]),t._v(" "),r("p",{staticClass:"text-gray-800"},[t._v(t._s(t.product.description))]),t._v(" "),r("div",{staticClass:"flex flex-row justify-center items-center"},[r("NumberSpinnerItem",{staticClass:"mr-1",attrs:{min:1},on:{add:t.addToCart},model:{value:t.quantity,callback:function(e){t.quantity=t._n(e)},expression:"quantity"}})],1),t._v(" "),t.administrator?r("div",{staticClass:"flex flex-row justify-center items-center space-x-2"},[r("button",{staticClass:"btn-outlined btn-outlined-orange px-2 py-1",on:{click:function(e){return t.remove()}}},[r("font-awesome-icon",{attrs:{icon:"times"}}),t._v(" Eliminar")],1),t._v(" "),t.administrator?r("router-link",{staticClass:"inline-block btn-outlined btn-outlined-orange px-2 py-1",attrs:{to:{name:"edit-product",params:{productId:t.product.id}}}},[r("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),t._v(" Editar")],1):t._e()],1):t._e()])])]],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex flex-1 flex-col justify-center items-center"},[e("span",{staticClass:"spinner w-12 h-12"})])}],!1,null,null,null);e.default=C.exports}}]);
//# sourceMappingURL=2.js.map